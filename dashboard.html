<script>
  const token = localStorage.getItem("ownerToken");

  if (!token) {
    alert("❌ Unauthorized! Please login first.");
    window.location.href = "login.html";
  } else {
    fetch("https://suriyawan-backend-18.onrender.com/api/owner/stats", {
      method: "GET",
      headers: {
        "Authorization": "Bearer " + token
      }
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        document.getElementById("orders").textContent = data.orders;
        document.getElementById("revenue").textContent = data.revenue;
        document.getElementById("deliveryBoys").textContent = data.deliveryBoys;
        document.getElementById("sellers").textContent = data.sellers;
        document.getElementById("customers").textContent = data.customers;
        document.getElementById("activePortals").textContent = data.activePortals;
        document.getElementById("tools").textContent = data.tools;
        document.getElementById("blocked").textContent = data.blocked;
        document.getElementById("logs").textContent = data.logs;
      } else {
        alert("⚠️ Login expired! Please login again.");
        localStorage.removeItem("ownerToken");
        window.location.href = "login.html";
      }
    })
    .catch(error => {
      console.error("Error fetching stats:", error);
      alert("⚠️ Backend not responding or invalid token!");
      window.location.href = "login.html";
    });
  }

  document.getElementById("logout-btn").addEventListener("click", () => {
    if (confirm("🚪 Do you really want to logout?")) {
      localStorage.removeItem("ownerToken");
      window.location.href = "login.html";
    }
  });
</script>
